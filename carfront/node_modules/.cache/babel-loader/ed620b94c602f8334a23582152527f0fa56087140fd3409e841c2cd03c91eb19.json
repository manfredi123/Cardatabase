{"ast":null,"code":"var _jsxFileName = \"/Users/manfredi/Documents/Spring Boot & React/Eclipse Workspace/carfront/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { SERVER_URL } from './constants.js';\nimport { Button } from \"@mui/material\";\nimport { TextField } from \"@mui/material\";\nimport { Stack } from \"@mui/material\";\nimport { Snackbar } from \"@mui/material\";\nimport Carlist from \"./Carlist\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [user, setUser] = useState({\n    username: '',\n    password: ''\n  });\n  const [isAuthenticated, setAuth] = useState(false);\n  const [open, setOpen] = useState(false);\n  const handleChange = event => {\n    setUser({\n      ...user,\n      [event.target.name]: event.target.value\n    });\n  };\n  const login = () => {\n    fetch(SERVER_URL + 'login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    }).then(res => {\n      const jwtToken = res.headers.get('Authorization');\n      if (jwtToken !== null) {\n        sessionStorage.setItem(\"jwt\", jwtToken);\n        setAuth(true);\n      } else {\n        setOpen(true);\n      }\n    }).catch(err => console.error(err));\n  };\n  const logout = () => {\n    sessionStorage.removeItem(\"jwt\");\n    setAuth(false);\n  };\n  if (isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Carlist, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 16\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Stack, {\n        spacing: 2,\n        alignItems: \"center\",\n        mt: 2,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          name: \"username\",\n          label: \"Username\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          name: \"password\",\n          label: \"Password\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"primary\",\n          onClick: login,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: open,\n        autoHideDuration: 3000,\n        onClose: () => setOpen(false),\n        message: \"Login failed: Check your credentials!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this);\n  }\n}\n_s(Login, \"awtiAUVaMDdy1UIV0n3KtQrScis=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","SERVER_URL","Button","TextField","Stack","Snackbar","Carlist","jsxDEV","_jsxDEV","Login","_s","user","setUser","username","password","isAuthenticated","setAuth","open","setOpen","handleChange","event","target","name","value","login","fetch","method","headers","body","JSON","stringify","then","res","jwtToken","get","sessionStorage","setItem","catch","err","console","error","logout","removeItem","fileName","_jsxFileName","lineNumber","columnNumber","children","spacing","alignItems","mt","label","onChange","variant","color","onClick","autoHideDuration","onClose","message","_c","$RefreshReg$"],"sources":["/Users/manfredi/Documents/Spring Boot & React/Eclipse Workspace/carfront/src/components/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { SERVER_URL } from './constants.js';\nimport { Button } from \"@mui/material\";\nimport { TextField } from \"@mui/material\";\nimport { Stack } from \"@mui/material\";\nimport { Snackbar } from \"@mui/material\";\nimport Carlist from \"./Carlist\";\n\nfunction Login() {\n    const [user, setUser] = useState({\n        username: '',\n        password: ''\n    });\n\n    const [isAuthenticated, setAuth] = useState(false);\n\n    const [open, setOpen] = useState(false);\n\n    const handleChange = (event) => {\n        setUser({...user,\n            [event.target.name] : event.target.value});\n    }\n    \n    const login = () => {\n        fetch(SERVER_URL + 'login', {\n            method: 'POST',\n            headers: {'Content-Type':'application/json'},\n            body: JSON.stringify(user)\n        })\n        .then(res => {\n            const jwtToken = res.headers.get('Authorization');\n            if(jwtToken !== null){\n                sessionStorage.setItem(\"jwt\",jwtToken);\n                setAuth(true);\n            }\n            else{\n                setOpen(true);\n            }\n        })\n        .catch(err => console.error(err))\n    }\n\n    const logout = () =>{\n        sessionStorage.removeItem(\"jwt\");\n        setAuth(false);\n    }\n    \n    if(isAuthenticated) {\n        return <Carlist />;\n    }\n    else {\n        return (\n            <div>\n            <Stack spacing={2} alignItems='center' mt={2}>\n                <TextField\n                    name=\"username\"\n                    label=\"Username\"\n                    onChange={handleChange} />\n                <TextField\n                    name=\"password\"\n                    label=\"Password\"\n                    onChange={handleChange} />\n                <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    onClick={login}>\n                        Login\n                    </Button>\n            </Stack>\n            <Snackbar\n                open={open}\n                autoHideDuration={3000}\n                onClose={() => setOpen(false)}\n                message=\"Login failed: Check your credentials!\" />\n        </div>\n        )\n    }\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}